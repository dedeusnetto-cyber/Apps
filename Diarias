
from flask import Flask, request, jsonify
from datetime import datetime

app = Flask(__name__)

def diarias_uti(inicio, fim):
    ini = datetime.strptime(inicio, "%d/%m/%Y").date()
    end = datetime.strptime(fim, "%d/%m/%Y").date()
    if end < ini:
        return {"erro": "Alta anterior Ã  entrada"}, 400
    return {"diarias": (end - ini).days + 1}

@app.route("/calcular", methods=["POST"])
def calcular():
    data = request.get_json()
    inicio = data.get("inicio")
    fim = data.get("fim")
    result = diarias_uti(inicio, fim)
    if isinstance(result, tuple):
        return jsonify(result[0]), result[1]
    return jsonify(result)

if __name__ == "__main__":
    app.run(debug=True)
